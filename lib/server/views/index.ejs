<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/bootstrap.min.css' />
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
<body>

    <div class="navbar navbar-default navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand nav-font" href="#">Fd-server 配置页面</a>
        </div>
		<div class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
			<ul class="nav navbar-nav" id="switch-tab">
				<li><a href="#host">vhosts配置</a></li>	
				<li><a href="#proxy">proxy配置</a></li>	
				<li><a href="#hostgroup">hosts管理</a></li>	
			</ul>	
		</div>
      </div>
    </div>

    <div id="con-wrapper">
	    <!-- dymatic server config -->
	    <div class="container" style="display:none;">
	      	<div class="jumbotron">
		      	<div>
			      	<h4>vhost配置</h4>
			      	<div class="server_cw setpt">
						<p>只需设置域名和本地路径</p>    
					</div>
			      	<% if (data && JSON.stringify(data.vhost) != "{}") { %>
						<table class="table table-condensed setmb" id="serverWrap">
							<% if (data && data.vhost) { %>
								<% for(var i in data.vhost){ %>
									<tr>
										<td>
											<%= i %>
										</td>
										<td>
											<%= data.vhost[i] %>
										</td>
										<td>
											<button type="button" class="btn btn-xs btn-danger Wpr" severrule='<%= i %>'>删除</button>
											<% if (datac && datac.vhost) { %>
												<% if (datac.vhost[i] === data.vhost[i]) { %>
													<button type="button" class="btn btn-xs btn-info" disablerule='<%= i %>'>已开启</button>
												<% }else{ %>
													<button type="button" class="btn btn-xs" disablerule='<%= i %>'>已禁用</button>
												<% } %>
											<% } %>
										</td>
									</tr>
								<% } %>
			              	<% } %>
						</table>
					<% }else{ %>
						<table class="table table-condensed setmb" id="serverWrap" style="display:none;">
						</table>	
					<% } %>
		      		<button type="button" class="btn btn-primary" id="staticServer">添加</button>	
		      	</div>

		      	<div></div>
	     	</div>
	    </div>

	    <!-- static server config -->
	    <div class="container" style="display:none;">
	      	<div class="jumbotron">
		      	<div>
			      	<h4>proxy配置</h4>
			      	<div class="server_cw setpt">
						<p>代理：localhost 端口: <span><%= datac.port %></span> <a href="https://github.com/liuxiaoyue/fd-server/wiki/%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%A3%E7%90%86"  target="_blank" class="proxyhelp">如何设置浏览器代理？</a></p>    
					</div>
			      	<button type="button" class="btn btn-primary" id="setRuleGroup">创建规则组</button>
		      	</div>
		      	<!-- 已经创建的规则组 -->
		      	<div class="panel panel-success" id="allgroupwrap" style="display:none;">
	            	<div class="panel-heading">
	              		<h3 class="panel-title">已创建的规则组</h3>
	           		</div>
		            <div class="panel-body" id="groupBtnWrap">
		             
		            </div>
	          	</div>
	          	<!-- 每个规则组面板集合-->
	          	<div id="allGroupPanel">
	          		
		        </div>
	     	</div>
	    </div>

	    <!-- static server group config -->
	    <div class="container" style="display:none;">
	      	<div class="jumbotron">
		      	<div>
			      	<h4>hosts组管理</h4>
			      	<button type="button" class="btn btn-primary" id="creatHostsGroup">创建hosts组</button>
		      	</div>
		      	<!-- 已经创建的规则组 -->
		      	<div class="panel panel-success" id="allHostWrap" style="display:none;">
	            	<div class="panel-heading">
	              		<h3 class="panel-title">规则组管理</h3>
	           		</div>
		            <div class="panel-body" id="hostWrap">
		             
		            </div>
	          	</div>
	          	<!-- 每个规则组面板集合-->
	          	<div id="allHostGroupPanel">
	          		
		        </div>
	     	</div>
	    </div>
	</div>
	
	<script type="text/javascript">
		var scope = {
			localData : <%- JSON.stringify(data) %>,
			configData : <%- JSON.stringify(datac) %>,
			hostData : <%- JSON.stringify(tpl) %>
		};
	</script>
	<script src="/javascripts/lithe.js"
		data-config="/config.js"
		data-main="conf/main.js"
		data-timestamp="1">
	</script>
  </body>
</html>
